import{r,u as j,j as e,L as f}from"./index-DM9lPFms.js";async function g(){const a=await fetch("/api/vans");if(!a.ok)throw new Error("Failed to fetch vans");return(await a.json()).vans}function N(){const[a,c]=r.useState([]),[o,h]=j(),[p,d]=r.useState(!1),[u,x]=r.useState(null),t=o.get("type");r.useEffect(()=>{async function s(){d(!0);try{const n=await g();c(n)}catch(n){console.log(n),x(n)}finally{d(!1)}}s()},[]);const m=t?a.filter(s=>s.type===t):a;if(p)return e.jsx("h2",{children:"Loading..."});if(u)return e.jsx("h2",{children:u.message});const y=m.map(s=>e.jsx("div",{className:"van-tile",children:e.jsxs(f,{to:s.id,state:{search:`?${o.toString()}`,type:t},children:[e.jsx("img",{alt:s.name,src:s.imageUrl}),e.jsxs("div",{className:"van-info",children:[e.jsx("h3",{children:s.name}),e.jsxs("p",{children:["$",s.price,e.jsx("span",{children:"/day"})]})]}),e.jsx("i",{className:`van-type ${s.type} selected`,children:s.type})]})},s.id));function l(s,n){h(i=>(n===null?i.delete(s):i.set(s,n),i))}return e.jsx("section",{className:"section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"van-list-container",children:[e.jsx("h1",{children:"Explore our van options"}),e.jsxs("div",{className:"van-list-filter-buttons",children:[e.jsx("button",{onClick:()=>l("type","simple"),className:`van-type simple ${t==="simple"?"selected":""}`,children:"Simple"}),e.jsx("button",{onClick:()=>l("type","luxury"),className:`van-type luxury ${t==="luxury"?"selected":""}`,children:"Luxury"}),e.jsx("button",{onClick:()=>l("type","rugged"),className:`van-type rugged ${t==="rugged"?"selected":""}`,children:"Rugged"}),t?e.jsx("button",{onClick:()=>l("type",null),className:"van-type clear-filters",children:"Clear filter"}):null]}),e.jsx("div",{className:"van-list",children:y})]})})})}export{N as default};
