import{r as i,u as j,j as e,L as f}from"./index-DfdJ0DmK.js";async function g(r){const t=await fetch("/api/vans");if(!t.ok)throw{message:"Failed to fetch vans",statusText:t.statusText,status:t.status};return(await t.json()).vans}function N(){const[r,o]=i.useState([]),[t,d]=j(),[x,u]=i.useState(!1),[h,p]=i.useState(null),a=t.get("type");i.useEffect(()=>{async function s(){u(!0);try{const n=await g();o(n)}catch(n){console.log(n),p(n)}finally{u(!1)}}s()},[]);const m=a?r.filter(s=>s.type===a):r;if(x)return e.jsx("h2",{children:"Loading..."});if(h)return e.jsx("h2",{children:h.message});const y=m.map(s=>e.jsx("div",{className:"van-tile",children:e.jsxs(f,{to:s.id,state:{search:`?${t.toString()}`,type:a},children:[e.jsx("img",{alt:s.name,src:s.imageUrl}),e.jsxs("div",{className:"van-info",children:[e.jsx("h3",{children:s.name}),e.jsxs("p",{children:["$",s.price,e.jsx("span",{children:"/day"})]})]}),e.jsx("i",{className:`van-type ${s.type} selected`,children:s.type})]})},s.id));function l(s,n){d(c=>(n===null?c.delete(s):c.set(s,n),c))}return e.jsx("section",{className:"section",children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"van-list-container",children:[e.jsx("h1",{children:"Explore our van options"}),e.jsxs("div",{className:"van-list-filter-buttons",children:[e.jsx("button",{onClick:()=>l("type","simple"),className:`van-type simple ${a==="simple"?"selected":""}`,children:"Simple"}),e.jsx("button",{onClick:()=>l("type","luxury"),className:`van-type luxury ${a==="luxury"?"selected":""}`,children:"Luxury"}),e.jsx("button",{onClick:()=>l("type","rugged"),className:`van-type rugged ${a==="rugged"?"selected":""}`,children:"Rugged"}),a?e.jsx("button",{onClick:()=>l("type",null),className:"van-type clear-filters",children:"Clear filter"}):null]}),e.jsx("div",{className:"van-list",children:y})]})})})}export{N as default};
